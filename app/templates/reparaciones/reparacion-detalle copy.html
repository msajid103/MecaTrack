{% extends 'base.html' %}
{% block content %}
            <!-- Contenido principal -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- Barra superior con botón de menú para móviles y usuario -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <div>
                        <button class="btn d-md-none" type="button" data-bs-toggle="collapse" data-bs-target="#sidebar">
                            <i class="fas fa-bars"></i>
                        </button>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="index.html">Dashboard</a></li>
                                <li class="breadcrumb-item"><a href="reparaciones.html">Reparaciones</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Reparación #1001</li>
                            </ol>
                        </nav>
                        <h1 class="h2">Detalle de Reparación</h1>
                    </div>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <a href="reparacion-form.html?id=1001" class="btn btn-primary">
                                <i class="fas fa-edit me-1"></i> Editar
                            </a>
                            <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteReparacionModal">
                                <i class="fas fa-trash me-1"></i> Eliminar
                            </button>
                        </div>
                        <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addActualizacionModal">
                            <i class="fas fa-plus me-1"></i> Añadir Actualización
                        </button>
                    </div>
                </div>

                <!-- Información de la reparación -->
                <div class="row">
                    <!-- Columna de información general -->
                    <div class="col-md-4 mb-4">
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Información General</h5>
                            </div>
                            <div class="card-body">
                                <div class="text-center mb-4">
                                    <div class="badge bg-warning p-3 mb-3">
                                        <i class="fas fa-tools fa-3x"></i>
                                    </div>
                                    <h4>Reparación #1001</h4>
                                    <p class="text-muted">Cambio de aceite y filtros</p>
                                    <span class="badge bg-warning">En progreso</span>
                                </div>
                                <hr>
                                <div class="info-list">
                                    <div class="info-item">
                                        <span class="info-label"><i class="fas fa-calendar-alt me-2"></i>Fecha de entrada</span>
                                        <span class="info-value">15/05/2023</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label"><i class="fas fa-calendar-check me-2"></i>Fecha estimada de salida</span>
                                        <span class="info-value">17/05/2023</span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label"><i class="fas fa-user me-2"></i>Cliente</span>
                                        <span class="info-value"><a href="cliente-detalle.html">Juan Pérez</a></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label"><i class="fas fa-car me-2"></i>Vehículo</span>
                                        <span class="info-value"><a href="vehiculo-detalle.html">Seat Ibiza (1234 ABC)</a></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label"><i class="fas fa-user-cog me-2"></i>Mecánico asignado</span>
                                        <span class="info-value"><a href="mecanico-detalle.html">Carlos Rodríguez</a></span>
                                    </div>
                                    <div class="info-item">
                                        <span class="info-label"><i class="fas fa-sticky-note me-2"></i>Notas</span>
                                        <span class="info-value">Cliente habitual. Prefiere ser contactado por teléfono.</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Columna de detalles y progreso -->
                    <div class="col-md-8">
                        <!-- Estado de la reparación -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="mb-0">Estado de la Reparación</h5>
                            </div>
                            <div class="card-body">
                                <div class="progress mb-3">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <div class="d-flex justify-content-between text-center">
                                    <div class="repair-status-item">
                                        <div class="repair-status-circle active">
                                            <i class="fas fa-check"></i>
                                        </div>
                                        <div class="repair-status-text">Recepción</div>
                                    </div>
                                    <div class="repair-status-item">
                                        <div class="repair-status-circle active">
                                            <i class="fas fa-check"></i>
                                        </div>
                                        <div class="repair-status-text">Diagnóstico</div>
                                    </div>
                                    <div class="repair-status-item">
                                        <div class="repair-status-circle active">
                                            <i class="fas fa-cog"></i>
                                        </div>
                                        <div class="repair-status-text">Reparación</div>
                                    </div>
                                    <div class="repair-status-item">
                                        <div class="repair-status-circle">
                                            <i class="fas fa-vial"></i>
                                        </div>
                                        <div class="repair-status-text">Pruebas</div>
                                    </div>
                                    <div class="repair-status-item">
                                        <div class="repair-status-circle">
                                            <i class="fas fa-check-circle"></i>
                                        </div>
                                        <div class="repair-status-text">Entrega</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Descripción del problema y diagnóstico -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="mb-0">Descripción y Diagnóstico</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-4">
                                    <h6>Descripción del Problema</h6>
                                    <p>El cliente solicita un cambio de aceite y filtros. También menciona que el vehículo hace un ruido extraño al arrancar en frío.</p>
                                </div>
                                <div>
                                    <h6>Diagnóstico</h6>
                                    <p>Tras la revisión inicial, se confirma la necesidad de cambio de aceite y filtros. El ruido al arrancar parece estar relacionado con la correa de distribución, que muestra signos de desgaste. Se recomienda su sustitución en los próximos 1.000 km.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Actualizaciones -->
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="mb-0">Actualizaciones</h5>
                            </div>
                            <div class="card-body">
                                <div class="repair-updates">
                                    <div class="update-item">
                                        <div class="update-date">16/05/2023 - 10:30</div>
                                        <div class="update-content">
                                            <strong>Reparación en curso</strong>
                                            <p>Se ha iniciado el cambio de aceite y filtros. Se estima finalizar en 2 horas.</p>
                                        </div>
                                    </div>
                                    <div class="update-item">
                                        <div class="update-date">15/05/2023 - 14:15</div>
                                        <div class="update-content">
                                            <strong>Diagnóstico completado</strong>
                                            <p>Se ha realizado el diagnóstico del vehículo. Se procederá al cambio de aceite y filtros. Se ha detectado desgaste en la correa de distribución.</p>
                                        </div>
                                    </div>
                                    <div class="update-item">
                                        <div class="update-date">15/05/2023 - 09:30</div>
                                        <div class="update-content">
                                            <strong>Vehículo recibido</strong>
                                            <p>El vehículo ha sido recibido en el taller. Se procederá a realizar el diagnóstico.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Presupuesto -->
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Presupuesto</h5>
                            </div>
                            <div class="card-body">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Concepto</th>
                                            <th>Cantidad</th>
                                            <th class="text-end">Precio Unitario</th>
                                            <th class="text-end">Total</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Aceite motor 5W30</td>
                                            <td>5L</td>
                                            <td class="text-end">9,00 €</td>
                                            <td class="text-end">45,00 €</td>
                                        </tr>
                                        <tr>
                                            <td>Filtro de aceite</td>
                                            <td>1</td>
                                            <td class="text-end">15,00 €</td>
                                            <td class="text-end">15,00 €</td>
                                        </tr>
                                        <tr>
                                            <td>Filtro de aire</td>
                                            <td>1</td>
                                            <td class="text-end">20,00 €</td>
                                            <td class="text-end">20,00 €</td>
                                        </tr>
                                        <tr>
                                            <td>Mano de obra</td>
                                            <td>1h</td>
                                            <td class="text-end">40,00 €</td>
                                            <td class="text-end">40,00 €</td>
                                        </tr>
                                    </tbody>
                                    <tfoot>
                                        <tr>
                                            <th colspan="3" class="text-end">Subtotal</th>
                                            <th class="text-end">120,00 €</th>
                                        </tr>
                                        <tr>
                                            <th colspan="3" class="text-end">IVA (21%)</th>
                                            <th class="text-end">25,20 €</th>
                                        </tr>
                                        <tr>
                                            <th colspan="3" class="text-end">Total</th>
                                            <th class="text-end">145,20 €</th>
                                        </tr>
                                    </tfoot>
                                </table>
                                <div class="d-flex justify-content-end mt-3">
                                    <button class="btn btn-outline-primary me-2">
                                        <i class="fas fa-print me-1"></i> Imprimir Presupuesto
                                    </button>
                                    <button class="btn btn-primary">
                                        <i class="fas fa-envelope me-1"></i> Enviar al Cliente
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
  

    <!-- Modal para añadir actualización -->
    <div class="modal fade" id="addActualizacionModal" tabindex="-1" aria-labelledby="addActualizacionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addActualizacionModalLabel">Añadir Actualización</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="tituloActualizacion" class="form-label">Título</label>
                            <input type="text" class="form-control" id="tituloActualizacion" required>
                        </div>
                        <div class="mb-3">
                            <label for="descripcionActualizacion" class="form-label">Descripción</label>
                            <textarea class="form-control" id="descripcionActualizacion" rows="3" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="estadoReparacion" class="form-label">Actualizar Estado</label>
                            <select class="form-select" id="estadoReparacion">
                                <option value="">No cambiar estado</option>
                                <option value="pendiente">Pendiente</option>
                                <option value="en_progreso" selected>En progreso</option>
                                <option value="pruebas">En pruebas</option>
                                <option value="completada">Completada</option>
                                <option value="cancelada">Cancelada</option>
                            </select>
                        </div>
                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="notificarCliente">
                            <label class="form-check-label" for="notificarCliente">
                                Notificar al cliente
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para confirmar eliminación -->
    <div class="modal fade" id="deleteReparacionModal" tabindex="-1" aria-labelledby="deleteReparacionModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="deleteReparacionModalLabel">Confirmar Eliminación</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>¿Está seguro de que desea eliminar la reparación <strong>#1001</strong>?</p>
                    <p class="text-danger">Esta acción no se puede deshacer.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-danger">Eliminar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS y Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}

